<h1>Listings#index</h1>
<p>Find me in app/views/listings/index.html.erb</p>

<p id="notice"><%= notice %></p>

<h1>Listing Listings</h1>


<%= will_paginate @listings %> <br>
<table width=100%>
  <thead>
    <tr>
      <th>Name</th>
      <th>Pictures</th>
      <th>Price/Night</th>
      <th>Home type</th>
      <th>Room type</th>
      <th>Accommodates</th>
      <th>Address</th>
      <th>City</th>
      <th>User</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @listings.each do |listing| %>
      <tr>
        <td><%= listing.name %></td>
        <% if listing.listingpics.blank? == true %>
        <td>No Pics Available</td>
        <% else %>
        <td><% listing.listingpics.each do |listingpic| %>
        <%= image_tag listingpic.url(:thumb).to_s, class: "img-rounded" %><b>
        <% end %>
        </td>
        <% end %>
        <td><%= listing.price_per_night %></td>
        <td><%= listing.home_type %></td>
        <td><%= listing.room_type %></td>
        <td><%= listing.accommodates %></td>
        <td><%= listing.address %></td>
        <td><%= listing.city %></td>
        <% if listing.user.profile != nil %>
        <td><%= image_tag listing.user.profile.profile_pic_url(:thumb).to_s, class: "img-circle" %><%= link_to "#{listing.user.profile.name}", profile_path(listing.user.profile.id) %></td>
        <% else %>
        <td><%= listing.user.email %></td>
        <% end %>
        <td><%= link_to 'Show', listing %></td>
        <td><%= link_to 'Edit', edit_listing_path(listing) %></td>
        <td><%= link_to 'Destroy', listing, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<br>
<%= will_paginate @listings %> <br>

<br>

<%= link_to 'New Listing', new_listing_path %>

<div class="container">

 <h1>JohnsonBnB Listings:</h1>
 <br>
 <% @listings.each do |listing| %>
   <div class="row"><!-- Full Row -->      
     <div class="col-lg-5"><!-- Picture Box-->
     <% if listing.listingpics.blank? == true %>
     <p>No Pics Available</p>
     <% else %>
       <%= image_tag listing.listingpics.first.url(:mid).to_s %>
     <% end %>
     </div><!-- End Picture Box -->
     <div class="col-lg-5"><!-- Info Box -->
       <h3><%= link_to "#{listing.name}", listing %></h3>
       <p>Home type: <%= listing.home_type %></p>
       <p>Room type: <%= listing.room_type %></p>
       <p>Accomodates: <%= listing.accommodates %></p>
       <p>Address: <%= listing.address %></p>
       <p>City: <%= listing.city %></p>
       <p>Price/Night: <%= listing.price_per_night %> USD</p>
     </div><!-- End Info Box -->
     <div class="col-lg-2"><!-- User Box -->
       <p>Posted by:</p>
       <p><%= image_tag listing.user.profile.profile_pic_url(:thumb).to_s, class:"img-circle" %> <%= link_to "#{listing.user.profile.name}", profile_path(listing.user.profile) %></p>
       <% if listing.user == current_user %>
         <p>
           <%= link_to 'Edit', edit_listing_path(listing), class:"btn btn-warning" %>
           <%= link_to 'Delete', listing, method: :delete, data: { confirm: 'Are you sure?' }, class:"btn btn-danger" %>
         </p>
       <% end %>          
     </div><!-- End User Box -->
     <hr>
   </div><!-- End Full Row -->
   <hr>
 <% end %>
   <%= link_to 'Create New Listing', new_listing_path, class:"btn btn-success" %>
</div>
